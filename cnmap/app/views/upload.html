<div class="photo-upload">

    <!-- The file upload form used as target for the file upload widget -->
    <div id="fileupload" action="http://127.0.0.1:8080/panor-web/api/rest/photo/upload"
          method="POST" enctype="multipart/form-data"
          ng-controller="DemoFileUploadController"
          file-upload="options"
          ng-class="{'fileupload-processing': processing() || loadingFiles}"
            >
        <div class="container-fluid header"
             waypoint-sticky="{'stuckClass': 'navbar-third', 'context': '.waypoint-scrollable', 'offset': '-1'}">
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="col col-sm-6">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}">
                    <i class="glyphicon glyphicon-plus"></i>
                    <span>添加图片...</span>
                    <input type="file" name="files[]" multiple ng-disabled="disabled">
                </span>
                <!--<button type="button" class="btn btn-primary start" data-ng-click="submit()">
                    <i class="glyphicon glyphicon-upload"></i>
                    <span>开始上传</span>
                </button>-->
                <button type="button" class="btn btn-warning cancel"
                        ng-click="cancel()"
                        data-ng-show="queue.length">
                    <i class="glyphicon glyphicon-ban-circle"></i>
                    <span>取消上传</span>
                </button>

                <!-- The global file processing state -->
                <span class="fileupload-process"></span>
            </div>
            <div class="col col-sm-3">
                <item-picker ng-model="travel"
                             load-data="loadTravelData"
                             new-data="newTravelData"
                             item-value-name="title"
                             options="{'duplicate': false}"
                             place-holder="添加到旅行"></item-picker>
            </div>
            <div class="col col-sm-3">
                <span>
                    共 {{queue.length}} 张图片
                </span>
            </div>
        </div>
            <div class="row fade" ng-class="{in: active()}">
                <!-- The global progress bar -->
                <div class="progress progress-striped active"
                     file-upload-progress="progress()">
                    <div class="progress-bar progress-bar-success" style="width: 100px;" ng-style="{width: num + '%'}"></div>
                </div>
                <!-- The extended global progress state -->
                <!--<div class="progress-extended">&nbsp;</div>-->
            </div>
        </div>

        <div style="margin: 10px;">
            <item-picker ng-model="tags"
                         load-data="loadTagData"
                         new-data="newTagData"
                         multiple-select
                         place-holder="为下面所有图片添加标签"></item-picker>
        </div>

        <!-- The table listing the files available for upload/download -->
        <table class="table table-striped table-hover files ng-cloak">
            <tr class="photo nav-list"
                ng-repeat="file in queue"
                ng-controller="PhotoUploadRowCtrl"
                ng-click="activePhoto(file)"
                ng-class="{'processing': file.$processing(), 'active': file.active}"
                ponm-hover=".action">
                <td data-ng-switch data-on="!!file.thumbnailUrl">
                    <div class="preview" data-ng-switch-when="true">
                        <a data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery>
                            <img data-ng-src="{{file.thumbnailUrl}}" alt="">
                        </a>
                    </div>
                    <div class="preview" data-ng-switch-default data-file-upload-preview="file"></div>
                </td>
                <td>
                    <div >
                        <!--<div>
                            <div class="editable-input"
                                 data-ng-class="{'hover': mouseEnter}"
                                 contentEditable
                                 ng-model="title"
                                 data-place-holder="{{file.name}}"></div>
                        </div>-->
                        <div ng-switch="editableView">
                            <a ng-switch-when="true"
                               href=""
                               editable-text="file.title"
                               onbeforesave="saveProperties('title', $data)"
                               buttons="no">{{ file.title || '添加标题' }}</a>
                            <h4 ng-switch-default>{{spot.title}}</h4>
                        </div>
                        <!--<div>
                            <pre class="description"
                                 data-ng-class="{'hover': mouseEnter}"
                                 contentEditable
                                 ng-model="description"
                                 data-place-holder="添加描述"
                                 multiple-line="4">{{description}}</pre>
                        </div>-->
                        <div ng-switch="editableView">
                            <div class="editable">
                                <a ng-switch-when="true"
                                   href=""
                                   editable-textarea="file.description" e-rows="4" e-cols="40"
                                   onbeforesave="saveProperties('description', $data)">
                                    <pre>{{ file.description || '添加描述' }}</pre>
                                </a>
                            </div>

                            <pre class="description" ng-switch-default>{{ file.description }}</pre>
                        </div>
                    </div>

                </td>
                <td>
                    <p class="size">{{file.size | formatFileSize}}</p>
                    <p>
                        <span class="label label-clickable"
                              ng-class="{'label-default': !file.is360, 'label-info': file.is360,
                          'action': !file.is360, 'ponm-show': file.is360}"
                              ng-click="file.is360=!file.is360">全景</span>
                    </p>
                    <p>
                        <span class="label label-clickable"
                              ng-class="{'label-default': !indoor.is, 'label-info': indoor.is,
                              'action': !indoor.is, 'ponm-show': indoor.is}"
                              ng-click="indoor.is=!indoor.is">{{indoor.tag}}</span>
                    </p>

                    <strong data-ng-show="file.error" class="error text-danger">{{file.error}}</strong>
                </td>
                <!--<td>
                    <button type="button" class="btn btn-primary start" data-ng-click="file.$submit()" data-ng-hide="!file.$submit || options.autoUpload" data-ng-disabled="file.$state() == 'pending' || file.$state() == 'rejected'">
                        <i class="glyphicon glyphicon-upload"></i>
                        <span>上传</span>
                    </button>
                    <button type="button" class="btn btn-warning cancel"
                            data-ng-click="file.$cancel()"
                            data-ng-hide="!file.$cancel">
                        <i class="glyphicon glyphicon-ban-circle"></i>
                        <span>取消</span>
                    </button>
                    <button ng-controller="FileDestroyController"
                            type="button"
                            class="btn btn-danger destroy"
                            data-ng-click="file.$destroy()"
                            data-ng-hide="!file.$endestroy">
                        <i class="glyphicon glyphicon-trash"></i>
                        <span>删除</span>
                    </button>
                </td>-->
                <td>
                    <p>
                        <a class="action"
                           href=""
                           ng-if="!file.latPritty">点击地图设置地点</a>
                        <div ng-if="!file.address"
                             class="location-display-place">
                            <a href=""
                               ng-click="changeLocation([file])">
                                <span class="lat">{{file.latPritty}} {{file.latPritty && file.latRef}}</span>
                                <span class="comma">{{file.latPritty && ", "}} </span>
                                <span class="lng">{{file.lngPritty}} {{file.lngPritty && file.lngRef}}</span>
                            </a>
                        </div>
                        <div class="location-display-address"
                             ng-if="file.latPritty">
                            <a href=""
                               editable-select="file.address"
                               e-ng-options="addr as addr for (addr, point) in file.mapVendor.addresses"
                               buttons="no"
                               onbeforesave="saveProperties('address', $data)">
                                {{ file.address || "[解析地址]"}}
                            </a>
                        </div>
                    </p>
                    <p>
                        <div ng-class="{'action': !file.tags.length, 'ponm-show': file.tags.length}"
                             style="margin: 2px 0;">
                            <item-picker ng-model="file.tags"
                                         load-data="loadTagData"
                                         new-data="newTagData"
                                         multiple-select
                                         place-holder="添加标签"
                                    />
                        </div>
                    </p>
                    <div class="progress progress-striped active fade" data-ng-class="{pending: 'in'}[file.$state()]" data-file-upload-progress="file.$progress()"><div class="progress-bar progress-bar-success" data-ng-style="{width: num + '%'}"></div></div>
                </td>

                <!--<td class="info-tag">
                    <span class="label label-primary"
                          data-ng-show="file.is360">全景</span>
                </td>-->
                <td class="link-tag"
                    ng-class="{'photo-upload-ok': file.photoId}"
                    ng-controller="FileDestroyController">
                    <div class="action">
                        <button type="button"
                                class="close"
                                ng-click="delete(file)">
                            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                        </button>
                    </div>

                    <!--<span data-ng-class="{'glyphicon': file.photoId, 'glyphicon-ok': file.photoId}"></span>
                    <a ng-href="{{ctx}}/map##lat={{file.lat}}&lng={{file.lng}}&zoom=18&userid={{userId}}"
                       tooltip="在地图中查看"
                       tooltip-trigger="mouseenter"
                       tooltip-placement="top">
                        <span data-ng-class="{'glyphicon': file.photoId, 'glyphicon-globe': file.photoId}"></span>
                    </a>-->
                </td>
            </tr>
        </table>
        <!--<div class="fileupload-footer" data-ng-show="queue.length">
            <span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}">
                        <i class="glyphicon glyphicon-plus"></i>
                        <span>添加图片...</span>
                        <input type="file" name="files[]" multiple ng-disabled="disabled">
                    </span>
            <a type="button" class="btn btn-primary" data-ng-href="{{ctx}}/map##userid={{userId}}">
                <i class="glyphicon glyphicon-ok-circle"></i>
                <span>完成</span>
            </a>
        </div>-->
    </div>
    <br >
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">注意事项</h3>
        </div>
        <div class="panel-body">
            <ul>
                <li>上传文件最大为<strong>10 MB</strong></li>
                <li>你可以拖动电脑上的图片到网页上进行上传</li>
            </ul>
        </div>
    </div>
</div>